(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const o of c.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerpolicy&&(c.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?c.credentials="include":a.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(a){if(a.ep)return;a.ep=!0;const c=r(a);fetch(a.href,c)}})();const N=document.querySelector(".page-header");function w(e){return e.map(n=>{const{section:a,title:c,description:o,url:i,date:s,img:l,imgCaption:d}=n;return`
            <div class="news-card">
                <img width="396" src="${l}" alt="${d}">
                <span>${a}</span>
                <h2>${c}</h2>
                <p>${o}</p>
                <span>${s}</span>    
                <a href="${i}">Read more</a>
            </div>
        `}).join("")}function $(e){N.insertAdjacentHTML("afterend",e)}const A="api-key=9GYTd3hNgT1cJMME7q1HMJAu02NGsmfm",b="https://api.nytimes.com",j=`${b}/svc/topstories/v2/arts.json?${A}`,k=`${b}/svc/search/v2/articlesearch.json?`;document.addEventListener("DOMContentLoaded",H);const q=async()=>{try{const e=await fetch(j);if(e.ok===!1)throw new Error("Such a request has not been found");const r=(await e.json()).results;M(r)}catch(e){console.log(e.message)}},O=document.querySelector(".page-header__search-input");O.addEventListener("change",P);function P(e){const t=e.target.value;console.log(t),I(t)}function H(e){e.preventDefault(),q()}const I=async e=>{try{const t=await fetch(`${k}q=${e}&${A}`);if(t.ok===!1)throw new Error("Such a request has not been found");const n=(await t.json()).response.docs;M(n)}catch(t){console.log(t.message)}};function M(e){console.log(e);const t=e.map(n=>({section:n.section_name||n.section,title:n.title||n.headline.main,description:n.abstract,url:n.web_url||n.url,date:n.pub_date||n.created_date,img:`${n.multimedia[0].url}`,imgCaption:`${n.multimedia[0].caption}`}));console.log(t);const r=w(t);$(r)}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var C="previous",Y="current",B="next",_=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"0";return e<10?t+e:e},f=function(e){return"".concat(e.getFullYear(),"-").concat(_(e.getMonth()+1),"-").concat(_(e.getDate()))},E=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},y=function(e){return new Promise(function(t){var r=[],n=R(e).map(function(o){return{date:o.date,iso:o.iso,type:C}}),a=F(e).map(function(o){return{date:o.date,iso:o.iso,type:Y}});r=r.concat(n).concat(a);var c=J(e,r.length).map(function(o){return{date:o.date,iso:o.iso,type:B}});t(r.concat(c))})},h=function(e){return function(t){return Array(e).fill().map(t)}},F=function(e){var t=E(e);return h(t)(function(r,n){var a=n+1;return e.setDate(a),{date:a,iso:f(e)}})},R=function(e){var t,r,n=e.getMonth(),a=e.getFullYear(),c=Math.min(n-1,11),o=new Date(a,c),i=E(o),s=i-(t=e,r=new Date(t.getFullYear(),t.getMonth(),1).toDateString().substring(0,3),["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].indexOf(r))+1;return h(i-s+1)(function(l,d){var m=s+d;return o.setDate(m),{date:m,iso:f(o)}})},J=function(e,t){var r=42-t,n=e.getMonth()+1===12?0:e.getMonth()+1,a=n===0?e.getFullYear()+1:e.getFullYear(),c=new Date(a,n);return h(r)(function(o,i){var s=i+1;return c.setDate(s),{date:s,iso:f(c)}})},G=function(){function e(){(function(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")})(this,e)}var t,r;return t=e,(r=[{key:"getDates",value:function(n){return new Promise(function(a){return a(y(n).then(function(c){return c.map(function(o){return o})}))})}},{key:"getMatrix",value:function(n){return new Promise(function(a){a(y(n).then(function(c){return c.reduce(function(o,i,s){return(s%7==0?o.push([i]):o[o.length-1].push(i))&&o},[])}))})}}])&&x(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),K=G;const S=new K;document.querySelector(".calendar__input");const U=document.querySelector(".calendar__body"),W=document.querySelector("#calend-btn"),u=["January","February","March","April","May","June","July","August","September","October","November","December"];W.addEventListener("click",Q);const z=async()=>{const e=await S.getMatrix(new Date);console.log("ðŸš€ ~ file: calendar.js:17 ~ main ~ datesArr",e);const t=new Date,r=[u[t.getMonth()],t.getFullYear()],n=g(e);V(e),console.log("ðŸš€ ~ file: calendar.js:28 ~ main ~ croppedArr",n),L(n),D(r)};async function Q(){const t=document.querySelector(".calend-month").textContent.split(" ");let r=u.indexOf(t[0]);console.log("date:",t),r===11?(r=0,t[1]=+t[1]+1,console.log("date:",t)):r+=1;const n=await S.getMatrix(new Date(`${t[1]}, ${u[r]}`)),a=g(n);console.log("ðŸš€ ~ file: calendar.js:28 ~ main ~ croppedArr",a),L(a),D([u[r],t[1]])}function D([e,t]){const r=document.querySelector(".calendar__body"),n=r.querySelector("p");n&&n.remove(),r.insertAdjacentHTML("afterbegin",`<p class="calend-month">${e} ${t}</p>`)}function L(e){const t=document.querySelector(".calendar__list"),r=new Date().getDate();t.innerHTML=`${e.map(n=>r===n.date?`<li class="calendar__date active">${n.date}</li>`:`<li class="calendar__date">${n.date}</li>`).join("")}`}function g(e){const t=e.flat();return console.log("cropped",t),[...t].slice(1,36)}function V(e){const t=g(e);console.log(t)}U.addEventListener("click",X);function X(e){console.log(e.target.className),e.target.className==="calendar__date"&&e.target.classList.toggle("checked")}z();const Z="api-key=9GYTd3hNgT1cJMME7q1HMJAu02NGsmfm",ee="https://api.nytimes.com";function te(){try{return fetch(`${ee}/svc/mostpopular/v2/viewed/1.json?${Z}`).then(e=>{if(!e.ok)throw new Error("Such a request has not been found");return e.json()}).then(({results:e})=>e)}catch(e){console.log(e.message)}}class ne{constructor(){this.API_KEY="api-key=9GYTd3hNgT1cJMME7q1HMJAu02NGsmfm",this.API_HOST="https://api.nytimes.com",this.WEB_HOST="https://www.nytimes.com",this.BASE_ENDPOINT_URL=`${this.API_HOST}/svc/topstories/v2/arts.json?${this.API_KEY}`,this.SEARCH_ENDPOINT_URL=`${this.API_HOST}/svc/search/v2/articlesearch.json?`}}const p=new ne,re=document.querySelector(".page-header__search-input");re.addEventListener("change",ae);function ae(e){const t=e.target.value;console.log(t),oe(t)}const oe=async e=>{try{const t=await fetch(`${p.SEARCH_ENDPOINT_URL}q=${e}&${p.API_KEY}`);if(t.ok===!1)throw new Error("Such a request has not been found");const n=(await t.json()).response.docs;console.log(n),ce(n)}catch(t){console.log(t.message)}};function ce(e){const t=e.map(n=>({section:n.section_name||n.section,title:n.title||n.headline.main,description:n.abstract,url:n.web_url||n.url,date:n.pub_date||n.created_date,img:`${p.WEB_HOST}/${n.multimedia[1].url}`}));console.log(t);const r=w(t);$(r)}const T=document.querySelector(".category__btn"),v=document.querySelector(".js-list-container");T.addEventListener("click",se);function se(){T.classList.toggle("isActiveBtn"),v.classList.toggle("is-open"),v.classList.toggle("list-container--animation")}function ie(e){return le(e).map(r=>{if(!r){console.log(r);return}const{section:n,title:a,description:c,url:o,date:i,img:s,imgCaption:l}=r;return`<li class="article">
     <div class="article_img_wrapper">
       <p class="already-read">Already read</p>
       <p class="article_category">${n}</p>
       <img class="article_img" src="${s[s.length-1].url}" alt="${l}" width="395" height="395">
       <div class="article_flag">
       <button class="article_flag--add"><span class="article_flag_text">Add to favorite</span>
         <svg width="16" height="16">
         <use href="../images/icon-sprites.svg#heart_contur" width="16" height="16"></use>
        </svg>
         </button>
         <button class="article_flag--remove is-hidden"><span class="article_flag_text">Remove from favorite</span>
         <svg width="16" height="16">
         <use href="../images/icon-sprites.svg#heart_fill" width="16" height="16"></use>
       </svg>
          </button>
         </div>
     </div>
     <div class="article_text_wrapper">
       <h2 class="article_title">${a}</h2>
       <p class="article_text">${c}</p>
     </div>
     <div class="article_info_wrapper">
       <p class="article_date">${i}</p>
       <a href="${o}" class="read-more">Read more</a>
     </div>
     </li>`}).join("")}function le(e){try{return e.map(r=>{if(r.media.length===0){console.log(r);return}return{section:r.section_name||r.section,title:r.title||r.headline.main,description:r.abstract,url:r.web_url||r.url,date:r.pub_date||r.created_date||r.published_date,img:r.media[0]["media-metadata"],imgCaption:r.media[0].caption}})}catch(t){console.error(t)}}const ue=document.querySelector(".articles_container");document.addEventListener("DOMContentLoaded",de);function de(e){e.preventDefault(),te().then(t=>ie(t)).then(t=>{ue.insertAdjacentHTML("beforeend",t)})}
