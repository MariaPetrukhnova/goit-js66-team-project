(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerpolicy&&(o.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?o.credentials="include":a.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();const l={categoryBtnEl:document.querySelector(".category__btn"),listConteinerEl:document.querySelector(".js-list-container"),btnOpenModal:document.querySelectorAll(".js-open-list"),viewportWidth:window.innerWidth,sectionRestList:document.querySelector(".rest__list"),categoryWrap:document.querySelector(".js-category__wrap"),categoryBtns:document.querySelectorAll(".js-category__btn")},T={search:document.querySelector(".js-search"),burgerMenu:document.querySelector(".js-menu-open"),searchInput:document.querySelector(".js-search-input"),body:document.querySelector("body")};T.search.addEventListener("click",B);function B(e){e.preventDefault(),T.searchInput.innerHTML='<input type="search" placeholder="Search" class="page-header__search-input">'}const v="/goit-js66-team-project/assets/icon-sprites-d3b1bf85.svg";function q(e){return F(e).map(n=>{if(!n)return;const{section:r,title:a,description:o,url:c,date:i,img:s,imgCaption:u}=n;return`<li class="article">
     <div class="article_img_wrapper">
       <p class="already-read">Already read</p>
       <p class="article_category">${r}</p>
       <img class="article_img" src="${s[s.length-1].url}" alt="${u}" width="395" height="395">
       <div class="article_flag">
       <button class="article_flag--add"><span class="article_flag_text">Add to favorite</span>
         <svg width="16" height="16">
         <use href="${v}#heart_contur" width="16" height="16"></use>
        </svg>
         </button>
         <button class="article_flag--remove is-hidden"><span class="article_flag_text">Remove from favorite</span>
         <svg width="16" height="16">
         <use href="${v}#heart_fill" width="16" height="16"></use>
       </svg>
          </button>
         </div>
     </div>
     <div class="article_text_wrapper">
       <h2 class="article_title">${a}</h2>
       <p class="article_text">${o}</p>
     </div>
     <div class="article_info_wrapper">
       <p class="article_date">${i}</p>
       <a href="${c}" class="read-more">Read more</a>
     </div>
     </li>`}).join("")}function F(e){try{return e.map(n=>{if(n.media.length!==0)return{section:n.section_name||n.section,title:n.title||n.headline.main,description:n.abstract,url:n.web_url||n.url,date:n.pub_date||n.created_date||n.published_date,img:n.media[0]["media-metadata"],imgCaption:n.media[0].caption}})}catch(t){console.error(t)}}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var G="previous",J="current",K="next",M=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"0";return e<10?t+e:e},b=function(e){return"".concat(e.getFullYear(),"-").concat(M(e.getMonth()+1),"-").concat(M(e.getDate()))},C=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},$=function(e){return new Promise(function(t){var n=[],r=V(e).map(function(c){return{date:c.date,iso:c.iso,type:G}}),a=U(e).map(function(c){return{date:c.date,iso:c.iso,type:J}});n=n.concat(r).concat(a);var o=z(e,n.length).map(function(c){return{date:c.date,iso:c.iso,type:K}});t(n.concat(o))})},D=function(e){return function(t){return Array(e).fill().map(t)}},U=function(e){var t=C(e);return D(t)(function(n,r){var a=r+1;return e.setDate(a),{date:a,iso:b(e)}})},V=function(e){var t,n,r=e.getMonth(),a=e.getFullYear(),o=Math.min(r-1,11),c=new Date(a,o),i=C(c),s=i-(t=e,n=new Date(t.getFullYear(),t.getMonth(),1).toDateString().substring(0,3),["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].indexOf(n))+1;return D(i-s+1)(function(u,p){var h=s+p;return c.setDate(h),{date:h,iso:b(c)}})},z=function(e,t){var n=42-t,r=e.getMonth()+1===12?0:e.getMonth()+1,a=r===0?e.getFullYear()+1:e.getFullYear(),o=new Date(a,r);return D(n)(function(c,i){var s=i+1;return o.setDate(s),{date:s,iso:b(o)}})},Q=function(){function e(){(function(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")})(this,e)}var t,n;return t=e,(n=[{key:"getDates",value:function(r){return new Promise(function(a){return a($(r).then(function(o){return o.map(function(c){return c})}))})}},{key:"getMatrix",value:function(r){return new Promise(function(a){a($(r).then(function(o){return o.reduce(function(c,i,s){return(s%7==0?c.push([i]):c[c.length-1].push(i))&&c},[])}))})}}])&&R(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),X=Q;const m=new X,S=document.querySelector(".js-open-calendar"),A=document.querySelector(".calendar__input"),j=document.querySelector(".js-calendar-container"),Z=document.querySelector(".calendar__month-btn--next"),ee=document.querySelector(".calendar__month-btn--prev"),te=document.querySelector(".calendar__year-btn"),d=["January","February","March","April","May","June","July","August","September","October","November","December"];te.addEventListener("click",se);Z.addEventListener("click",re);ee.addEventListener("click",ae);S.addEventListener("click",W);function W(){const e=A.getAttribute("aria-expanded")==="true"||!1;S.setAttribute("aria-expanded",!e),S.classList.toggle("reversed"),j.classList.toggle("is-open")}const ne=async()=>{const e=await m.getMatrix(new Date);console.log("ðŸš€ ~ file: calendar.js:17 ~ main ~ datesArr",e);const t=new Date,n=[d[t.getMonth()],t.getFullYear()],r=y(e);_(r),g(n)};function I(){fetchPopularNews().then(e=>q(e)).then(e=>{articlesGallery.insertAdjacentHTML("beforeend",e)}).then(()=>{const e=[...articlesGallery.querySelectorAll(".article_text")];sliceArticlesDescription(e)})}async function re(){const t=document.querySelector(".calendar__month").textContent.split(" ");let n=ce(t);const r=await m.getMatrix(new Date(`${t[1]}, ${d[n]}`)),a=y(r);console.log("ðŸš€ ~ file: calendar.js:28 ~ main ~ croppedArr",a),_(a),g([d[n],t[1]])}async function ae(){const t=document.querySelector(".calendar__month").textContent.split(" ");let n=oe(t);const r=await m.getMatrix(new Date(`${t[1]}, ${d[n]}`)),a=y(r);console.log("ðŸš€ ~ file: calendar.js:28 ~ main ~ croppedArr",a),_(a),g([d[n],t[1]])}function oe(e){let t=d.indexOf(e[0]);return console.log("date:",e),console.log("index:",t),t===0?(t=11,e[1]=+e[1]-1,console.log("date:",e)):t-=1,t}function ce(e){let t=d.indexOf(e[0]);return console.log("date:",e),t===11?(t=0,e[1]=+e[1]+1,console.log("date:",e)):t+=1,t}async function se(){const t=document.querySelector(".calendar__month").textContent.split(" ");t[1]=+t[1]+1;let n=d.indexOf(t[0]);const r=await m.getMatrix(new Date(`${t[1]}, ${d[n]}`)),a=y(r);console.log("ðŸš€ ~ file: calendar.js:28 ~ main ~ croppedArr",a),_(a),g([d[n],t[1]])}function g([e,t]){const n=document.querySelector(".calendar__body-caption"),r=n.querySelector("p");r&&r.remove(),n.insertAdjacentHTML("afterbegin",`<p class="calendar__month">${e} ${t}</p>`)}function _(e){const t=document.querySelector(".calendar__list"),n=new Date().getDate(),r=new Date;t.innerHTML=`${e.map(a=>{const o=new Date(a.iso).getDay();return n===a.date?`<li id="${a.iso}" class="calendar__date calendar__date--active">${a.date}</li>`:+r<new Date(a.iso)?`<li id="${a.iso}" class="calendar__date calendar__date--inactive">${a.date}</li>`:o===6||o===0?`<li id="${a.iso}" class="calendar__date calendar__date--weekend">${a.date}</li>`:`<li id="${a.iso}" class="calendar__date">${a.date}</li>`}).join("")}`}function ie(){const e=document.querySelector(".news-gallery");return e.innerHTML=`<div class="container">
  <h2 class="not__found__title">We couldn't find news from this date</h2>
  <picture>
      <source
      srcset="./images/not-found-desktop-1x.png 1x, ./images/not-found-desktop-2x.png 2x"
      media="(min-width: 1280px)"
      />
      <source
      srcset="./images/not-found-tablet-1x.png 1x, ./images/not-found-tablet-2x.png 2x"
      media="(min-width: 768px)"
      />
      <source
      srcset="./images/not-found-mobile-1x.png 1x, ./images/not-found-mobile-2x.png 2x"
      media="(max-width: 767px)"
      />
      <img class="not__found__image" src="./images/not-found-desktop-1x.png" alt="not found image">
  </picture>
</div>`}function y(e){const t=e.flat();return console.log("cropped",t),[...t].slice(1,36)}j.addEventListener("click",le);function le(e){if(!e.target.classList.contains("calendar__date"))return;const n=e.target,r=document.querySelector(".calendar__date--active"),a=new Date(e.target.id);console.log("selectedDate",a),console.log("todayDate",new Date),I(),r===n?(A.value="",r.classList.remove("calendar__date--active")):r!==n&&a>new Date?(console.log("selectedDate > new Date()",a>new Date),ie(),E(),k(n)):(E(),k(n))}function E(){const e=document.querySelector(".calendar__date.calendar__date--active");e&&e.classList.remove("calendar__date--active")}function de(e){const t=e.id.split("-").reverse().join("/");return A.value=t,t}function k(e){e.classList.add("calendar__date--active"),de(e),W()}ne();I();const ue="api-key=9GYTd3hNgT1cJMME7q1HMJAu02NGsmfm",pe="https://api.nytimes.com";function fe(){try{return fetch(`${pe}/svc/mostpopular/v2/viewed/1.json?${ue}`).then(e=>{if(!e.ok)throw new Error("Such a request has not been found");return e.json()}).then(({results:e})=>e)}catch(e){console.log(e.message)}}class P{constructor(){this.API_KEY="api-key=9GYTd3hNgT1cJMME7q1HMJAu02NGsmfm",this.API_HOST="https://api.nytimes.com",this.WEB_HOST="https://www.nytimes.com",this.BASE_ENDPOINT_URL=`${this.API_HOST}/svc/topstories/v2/arts.json?${this.API_KEY}`,this.SEARCH_ENDPOINT_URL=`${this.API_HOST}/svc/search/v2/articlesearch.json?`,this.ATEGOTY_END_POINT=`${this.API_HOST}/svc/news/v3/content/all/`,this.SEARCH_CATEGORI=`${this.API_HOST}/svc/news/v3/content/section-list.json?${this.API_KEY}`}}const he=document.querySelector(".page-header");function me(e){return e.map(r=>{const{section:a,title:o,description:c,url:i,date:s,img:u,imgCaption:p}=r;return`
            <div class="news-card">
                <img width="396" src="${u}" alt="${p}">
                <span>${a}</span>
                <h2>${o}</h2>
                <p>${c}</p>
                <span>${s}</span>
                <a href="${i}">Read more</a>
            </div>
        `}).join("")}function ge(e){he.insertAdjacentHTML("afterend",e)}const O=new P,x=document.querySelector(".not-found"),_e=document.querySelector(".page-header__search-input");_e.addEventListener("change",ye);function ye(e){const t=e.target.value;console.log(t),we(t)}const we=async e=>{try{const t=await fetch(`${O.SEARCH_ENDPOINT_URL}q=${e}&${O.API_KEY}`);if(t.ok===!1)throw new Error("Such a request has not been found");const r=(await t.json()).response.docs;r.length?(x.classList.add("is-hidden"),ve(r)):Se(),console.log(r)}catch(t){console.log(t.message)}};function ve(e){const t=e.map(r=>({section:r.section_name||r.section,title:r.title||r.headline.main,description:r.abstract,url:r.web_url||r.url,date:r.pub_date||r.created_date,img:`${O.WEB_HOST}/${r.multimedia[1].url}`}));console.log(t);const n=me(t);ge(n)}function Se(){x.classList.contains("is-hidden")&&x.classList.remove("is-hidden")}const Oe=new P;let f=[];l.btnOpenModal.forEach(e=>{e.addEventListener("click",xe)});function xe(){l.btnOpenModal.forEach(e=>{e.classList.toggle("isActiveBtn")}),l.listConteinerEl.classList.toggle("is-open"),l.listConteinerEl.classList.toggle("list-container--animation")}const be=async()=>{try{const e=await fetch(`${Oe.SEARCH_CATEGORI}`);if(e.ok===!1)throw new Error("Such a request has not been found");return await(await e.json()).results}catch(e){console.log(e.message)}};be().then(e=>{if(e.forEach(t=>{f.push(t)}),l.viewportWidth<768)l.listConteinerEl.innerHTML=w(e);else if(l.viewportWidth>=768){const t=[];l.categoryBtns.forEach((n,r)=>{n.textContent=e[r].display_name,r=4});for(let n=6;n<f.length;n++)t.push(f[n]);l.listConteinerEl.innerHTML=w(t)}else if(l.viewportWidth>=1280){const t=[];l.categoryBtns.forEach((n,r)=>{n.textContent=e[r].display_name,r=5});for(let n=5;n<f.length;n++)t.push(f[n]);l.listConteinerEl.innerHTML=w(t)}});function w(e){return`<div class="rest__wrapper"><ul class="rest__list list">${e.map(n=>`<li class="rest__item item">${n.display_name}</li>`).join("")}</ul></div >`}const L=document.querySelector(".articles_container");document.addEventListener("DOMContentLoaded",De);function De(e){e.preventDefault(),fe().then(t=>q(t)).then(t=>{L.insertAdjacentHTML("beforeend",t)}).then(()=>{const t=[...L.querySelectorAll(".article_text")];Ae(t)})}function Ae(e){e.forEach(t=>{if(t.textContent.length>150){const n=t.textContent.slice(0,150);t.textContent=`${n}...`}})}const Me=document.querySelector("main"),H="419bd34d8daba21c0a4890e35d027d3f";document.addEventListener("DOMContentLoaded",$e);function N(e){qe(e).then(n=>{n!==void 0&&ke(n)})}function $e(){navigator.geolocation?navigator.geolocation.getCurrentPosition(Ee,je):alert("Your browser does not support geolocation")}function Ee(e){const{latitude:t,longitude:n}=e.coords,r=`https://api.openweathermap.org/data/2.5/weather?lat=${t}&lon=${n}&units=metric&appid=${H}`;N(r)}function ke(e){const{name:t}=e,{temp:n}=e.main,{main:r,icon:a}=e.weather[0],o=new Date,{dayOfWeek:c,dateOfWeek:i,monthOfWeek:s}=Ce(o.toUTCString()),u=Le(i,s,o),p={temp:Math.floor(n),typeWeather:r,city:t,srcIcon:Te(a),dayOfWeak:c,dateOfWeak:u,imgOpacity:"",dateOpacity:"",splitterOpacity:"",typegroupOpacity:"",textSymbol:"&#176;"};Y(p)}function Le(e,t,n){return e+" "+t+" "+n.getFullYear()}function Te(e){return`https://openweathermap.org/img/wn/${e}.png`}function qe(e){return fetch(e).then(n=>{if(n.ok)return n.json();Y({temp:"no-",typeWeather:"",city:"",srcIcon:"",dayOfWeak:"",dateOfWeak:"",imgOpacity:" opacityElement",dateOpacity:" opacityElement",splitterOpacity:" opacityElement",typegroupOpacity:" opacityElement",textSymbol:"data"})})}function Y(e){const t=We(e);Me.insertAdjacentHTML("afterend",t)}function Ce(e){const t=e.indexOf(","),n=e.substr(0,t).trim(),r=e.substr(t+1).trim(),a=r.indexOf(" "),o=r.substr(0,a).trim(),c=r.substr(a+1).trim(),i=c.indexOf(" "),s=c.substr(0,i).trim();return{dayOfWeek:n,monthOfWeek:s,dateOfWeek:o}}function je(){const e=`https://api.openweathermap.org/data/2.5/weather?q=lONDON&lang=en&units=metric&appid=${H}`;N(e)}function We(e){const{temp:t,typeWeather:n,city:r,srcIcon:a,dayOfWeak:o,dateOfWeak:c,imgOpacity:i,dateOpacity:s,splitterOpacity:u,typegroupOpacity:p,textSymbol:h}=e;return'<section class="weather"><div class="weather__group"><div class="weather__temperaturedate"><span class="weather__temperature">'+String(t)+'</span><span class="weather__symbol" >'+h+'</span></div ><div class="weather__splitter'+u+'"></div > <div class="weather__typegroup'+p+'"><span class="weather__type">'+String(n)+`</span > <div class="weather__citygroup"><svg class="weather__svg"><use href="${v}#location"></use></svg > <p class="weather__city">`+String(r)+'</p > </div ></div ></div ><div class="weather__img'+i+'"><img class="weather__imgvalue" src="'+String(a)+'" alt=""></div ><div class="weather__date'+s+'"><span class="weather__dayofweek">'+String(o)+'</span > <span class="weather__dateofweek">'+String(c)+'</span></div><div class="weather__refgroup"><a class="weather__ref" href="https://sinoptik.ua/" rel="noopener noreferrer" target="_blank">weather for week</a ></div ></section > '}
