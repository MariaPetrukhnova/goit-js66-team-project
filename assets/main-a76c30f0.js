import{n as g,s as y,r as l,a as de,b as ue,l as pe}from"./localeStoreageHandler-bad73aa4.js";import{c as fe}from"./markup-204c754d.js";function he(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var ge="previous",me="current",_e="next",B=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"0";return e<10?n+e:e},W=function(e){return"".concat(e.getFullYear(),"-").concat(B(e.getMonth()+1),"-").concat(B(e.getDate()))},V=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},Y=function(e){return new Promise(function(n){var t=[],a=ye(e).map(function(s){return{date:s.date,iso:s.iso,type:ge}}),r=ve(e).map(function(s){return{date:s.date,iso:s.iso,type:me}});t=t.concat(a).concat(r);var i=we(e,t.length).map(function(s){return{date:s.date,iso:s.iso,type:_e}});n(t.concat(i))})},H=function(e){return function(n){return Array(e).fill().map(n)}},ve=function(e){var n=V(e);return H(n)(function(t,a){var r=a+1;return e.setDate(r),{date:r,iso:W(e)}})},ye=function(e){var n,t,a=e.getMonth(),r=e.getFullYear(),i=Math.min(a-1,11),s=new Date(r,i),c=V(s),o=c-(n=e,t=new Date(n.getFullYear(),n.getMonth(),1).toDateString().substring(0,3),["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].indexOf(t))+1;return H(c-o+1)(function(p,f){var d=o+f;return s.setDate(d),{date:d,iso:W(s)}})},we=function(e,n){var t=42-n,a=e.getMonth()+1===12?0:e.getMonth()+1,r=a===0?e.getFullYear()+1:e.getFullYear(),i=new Date(r,a);return H(t)(function(s,c){var o=c+1;return i.setDate(o),{date:o,iso:W(i)}})},be=function(){function e(){(function(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")})(this,e)}var n,t;return n=e,(t=[{key:"getDates",value:function(a){return new Promise(function(r){return r(Y(a).then(function(i){return i.map(function(s){return s})}))})}},{key:"getMatrix",value:function(a){return new Promise(function(r){r(Y(a).then(function(i){return i.reduce(function(s,c,o){return(o%7==0?s.push([c]):s[s.length-1].push(c))&&s},[])}))})}}])&&he(n.prototype,t),Object.defineProperty(n,"prototype",{writable:!1}),e}(),Le=be;class w{constructor(){this.pageNumber=0,this.API_KEY="api-key=9GYTd3hNgT1cJMME7q1HMJAu02NGsmfm",this.API_HOST="https://api.nytimes.com",this.WEB_HOST="https://www.nytimes.com",this.BASE_ENDPOINT_URL=`${this.API_HOST}/svc/topstories/v2/arts.json?${this.API_KEY}`,this.SEARCH_ENDPOINT_URL=`${this.API_HOST}/svc/search/v2/articlesearch.json?`,this.SEARCH_CATEGORI=`${this.API_HOST}/svc/news/v3/content/section-list.json?${this.API_KEY}`,this.CATEGORY_END_POINT=`${this.API_HOST}/svc/news/v3/content/all/`,this.MOST_POPULAR_URL=`${this.API_HOST}/svc/mostpopular/v2/viewed/1.json?${this.API_KEY}`}}document.getElementById("pagination");const M=document.querySelector(".articles_container"),k=document.querySelector(".page-container"),Z=document.querySelector(".articles_container"),L=new w;let m=1e3;const T=document.querySelector(".not-found"),Se=document.querySelector(".search-field");Se.addEventListener("submit",$e);function $e(e){const t=e.currentTarget.elements.searchQuery.value.trim();if(!t)return;e.preventDefault();const a=document.querySelector(".calendar__input");a.value="";let r=L.pageNumber;a.value||(g.Loading.standard("Loading...",{backgroundColor:"rgba(0,0,0,0.8)"}),X(t,r),g.Loading.remove(1e3)),a.value&&R(t,a,r)}const X=async(e,n)=>{try{const t=await fetch(`${L.SEARCH_ENDPOINT_URL}q=${e}&page=${n}&${L.API_KEY}`);if(t.ok===!1)throw new Error("Such a request has not been found");const a=await t.json(),r=a.response.docs;m=a.response.meta.hits,m>1e3?u.totalPages=99:u.totalPages=m/10,S({curPage:1,numLinksTwoSide:1,totalPages:4}),m=a.response.meta.hits,m>1e3?u.totalPages=99:u.totalPages=Math.ceil(m/10),S({curPage:1,numLinksTwoSide:1,totalPages:4}),r.length?(T.classList.add("is-hidden"),k.classList.remove("is-hidden"),ee(r),m<9&&k.classList.add("is-hidden")):r.length===0&&(te(),k.classList.add("is-hidden"))}catch(t){console.log(t)}};function ee(e){const n=e.map(t=>t.multimedia.length===0?{section:t.section_name||t.section,title:t.title||t.headline.main,description:t.abstract,url:t.web_url||t.url,date:t.pub_date.slice(0,10)||t.created_date.slice(0,10),imgCaption:t.lead_paragraph,img:"https://cdn.pixabay.com/photo/2013/07/12/19/16/newspaper-154444_960_720.png"}:{section:t.section_name||t.section,title:t.title||t.headline.main,description:t.abstract,url:t.web_url||t.url,date:t.pub_date.slice(0,10)||t.created_date.slice(0,10),imgCaption:t.lead_paragraph,img:`${L.WEB_HOST}/${t.multimedia[1].url}`});Ae(n)}function Ae(e){const n=e.map(t=>{if(!t)return;const{section:a,title:r,description:i,url:s,date:c,img:o,imgCaption:p}=t;return`<li class="article">
     <div class="article_img_wrapper">
       <p class="already-read is-hidden">Already read</p>
       <p class="article_category">${a}</p>
       <img class="article_img" src="${o}" alt="${p}" width="395" height="395">
       <div class="article_flag">
       <button class="favorites-button article_flag--add"><span class="article_flag_text">Add to favorite</span>
         <svg width="16" height="16">
         <use href="${y}#heart_contur" width="16" height="16"></use>
        </svg>
         </button>
         <button class="favorites-button article_flag--remove is-hidden"><span class="article_flag_text">Remove from favorite</span>
         <svg width="16" height="16">
         <use href="${y}#heart_fill" width="16" height="16"></use>
       </svg>
          </button>
         </div>
     </div>
     <div class="article_text_wrapper">
       <h2 class="article_title">${r}</h2>
       <p class="article_text">${i.slice(0,70)}...</p>
     </div>
     <div class="article_info_wrapper">
       <p class="article_date">${c.slice(0,10)}</p>
       <a href="${s}" class="read-more">Read more</a>
     </div>
     </li>`}).join("");return Oe(n)}function Oe(e){M.innerHTML="",Z.classList.add("articles_container"),M.insertAdjacentHTML("beforeend",e)}function te(){T.classList.contains("is-hidden")&&(M.innerHTML="",Z.classList.remove("articles_container"),T.classList.remove("is-hidden"))}const x=document.getElementById("pagination"),C=document.querySelector("button.next-page"),q=document.querySelector("button.prev-page"),u={curPage:1,numLinksTwoSide:1,totalPages:10};x.addEventListener("click",e=>{const n=e.target;if(g.Loading.standard("Loading...",{backgroundColor:"rgba(0,0,0,0.8)"}),n.dataset.page){const t=parseInt(e.target.dataset.page,10);g.Loading.remove(1e3),u.curPage=t,ne(),ae()}});function S(){const{totalPages:e,curPage:n,numLinksTwoSide:t}=u,a=t+4;let r="",i="",s='<li class="pg-item"><a class="pg-link">...</a></li>',c=0;const o=n-t,p=n+t;let f="";for(let d=1;d<=e;d++)f=d===n?"active":"",e>=2*a-1?o>3&&p<e-3+1?d>=o&&d<=p&&(i+=_(d,f)):n<a&&d<=a||n>e-a&&d>=e-a+1||d===e||d===1?r+=_(d,f):(c++,c===1&&(r+=s)):r+=_(d,f);i?(i=_(1)+s+i+s+_(e),x.innerHTML=i):x.innerHTML=r}function _(e,n=""){return` <li class="pg-item ${n}" data-page="${e}">
        <a class="pg-link" href="#">${e}</a>
    </li>`}document.querySelector(".page-container").addEventListener("click",function(e){Ee(e.target)});function Ee(e){e.classList.contains("first-page")?u.curPage=1:e.classList.contains("last-page")?u.curPage=10:e.classList.contains("prev-page")?(u.curPage--,ne(),C.disabled=!1):e.classList.contains("next-page")&&(u.curPage++,ae(),q.disabled=!1),S();const n=document.querySelector(".calendar__input").value,t=document.querySelector(".page-header__search-input").value;let a;n&&(a=n.split("/").reverse().join("")),!(!a&&!t)&&(t&&a||a?(R(t,a,u.curPage-1),window.scroll({top:0,behavior:"smooth"})):(X(t,u.curPage-1),window.scroll({top:0,behavior:"smooth"})))}function ne(){u.curPage===1?q.disabled=!0:q.disabled=!1}function ae(){u.curPage===u.totalPages?C.disabled=!0:C.disabled=!1}const $=new Le,F=new w;let b=1e3;const ke=document.querySelector(".not-found"),P=document.querySelector(".page-container"),I=document.querySelector(".js-open-calendar"),N=document.querySelector(".calendar__input"),re=document.querySelector(".js-calendar-container"),Pe=document.querySelector(".calendar__month-btn--next"),De=document.querySelector(".calendar__month-btn--prev"),Me=document.querySelector(".calendar__year-btn"),h=["January","February","March","April","May","June","July","August","September","October","November","December"];Me.addEventListener("click",je);Pe.addEventListener("click",xe);De.addEventListener("click",Ce);I.addEventListener("click",ie);function ie(){const e=N.getAttribute("aria-expanded")==="true"||!1;I.setAttribute("aria-expanded",!e),I.classList.toggle("reversed"),re.classList.toggle("is-open")}const Te=async()=>{const e=await $.getMatrix(new Date),n=new Date,t=[h[n.getMonth()],n.getFullYear()],a=E(e);O(a),A(t)};async function xe(){const n=document.querySelector(".calendar__month").textContent.split(" ");let t=Ie(n);const a=await $.getMatrix(new Date(`${n[1]}, ${h[t]}`)),r=E(a);O(r),A([h[t],n[1]])}async function Ce(){const n=document.querySelector(".calendar__month").textContent.split(" ");let t=qe(n);const a=await $.getMatrix(new Date(`${n[1]}, ${h[t]}`)),r=E(a);O(r),A([h[t],n[1]])}function qe(e){let n=h.indexOf(e[0]);return n===0?(n=11,e[1]=+e[1]-1):n-=1,n}function Ie(e){let n=h.indexOf(e[0]);return n===11?(n=0,e[1]=+e[1]+1):n+=1,n}async function je(){const n=document.querySelector(".calendar__month").textContent.split(" ");n[1]=+n[1]+1;let t=h.indexOf(n[0]);const a=await $.getMatrix(new Date(`${n[1]}, ${h[t]}`)),r=E(a);O(r),A([h[t],n[1]])}function A([e,n]){const t=document.querySelector(".calendar__body-caption"),a=t.querySelector("p");a&&a.remove(),t.insertAdjacentHTML("afterbegin",`<p class="calendar__month">${e} ${n}</p>`)}function O(e){const n=document.querySelector(".calendar__list"),t=new Date,a=t.getDate();n.innerHTML=`${e.map(r=>{const i=new Date(r.iso).getDay();return a===r.date?`<li id="${r.iso}" class="calendar__date calendar__date--active">${r.date}</li>`:+t<new Date(r.iso)?`<li id="${r.iso}" class="calendar__date calendar__date--inactive">${r.date}</li>`:i===6||i===0?`<li id="${r.iso}" class="calendar__date calendar__date--weekend">${r.date}</li>`:`<li id="${r.iso}" class="calendar__date">${r.date}</li>`}).join("")}`}function E(e){return[...e.flat()].slice(1,36)}re.addEventListener("click",We);function We(e){if(!e.target.classList.contains("calendar__date"))return;const t=e.target,a=document.querySelector(".calendar__date--active"),r=new Date(e.target.id);t.id.split("-").reverse().join("/");const i=t.id.split("-").join(""),s=document.querySelector(".page-header__search-input").value;if(a===t)N.value="",a.classList.remove("calendar__date--active");else{if(a!==t&&r>new Date)return;g.Loading.standard("Loading...",{backgroundColor:"rgba(0,0,0,0.8)"}),He(),Re(t),R(s,i),g.Loading.remove(1e3)}}function He(){const e=document.querySelector(".calendar__date.calendar__date--active");e&&e.classList.remove("calendar__date--active")}let G=0;function Ne(e){const n=e.id.split("-").reverse().join("/");return N.value=n,G=e.id.split("-").join(""),G}const R=async(e="",n="",t=0)=>{try{const a=await fetch(`${F.SEARCH_ENDPOINT_URL}q=${e}&page=${t}&begin_date=${n}&end_date=${n}&${F.API_KEY}`);if(a.ok===!1)throw new Error("Such a request has not been found");const r=await a.json(),i=r.response.docs;b=r.response.meta.hits,b>1e3?u.totalPages=99:u.totalPages=Math.ceil(b/10),S({curPage:1,numLinksTwoSide:1,totalPages:4}),i.length?(ke.classList.add("is-hidden"),P.classList.remove("is-hidden"),ee(i),b<9&&P.classList.add("is-hidden")):i.length===0&&(te(),P.classList.add("is-hidden"))}catch(a){console.log(a)}};function Re(e){e.classList.add("calendar__date--active"),Ne(e),ie()}Te();document.querySelector("main");const se="419bd34d8daba21c0a4890e35d027d3f";function oe(e){Ue(e).then(t=>{t!==void 0&&Ye(t)})}function ce(){navigator.geolocation?navigator.geolocation.getCurrentPosition(Be,Je):alert("Your browser does not support geolocation")}function Be(e){const{latitude:n,longitude:t}=e.coords,a=`https://api.openweathermap.org/data/2.5/weather?lat=${n}&lon=${t}&units=metric&appid=${se}`;oe(a)}function Ye(e){const{name:n}=e,{temp:t}=e.main,{main:a,icon:r}=e.weather[0],i=new Date,{dayOfWeek:s,dateOfWeek:c,monthOfWeek:o}=Ke(i.toUTCString()),p=Fe(c,o,i),f={temp:Math.floor(t),typeWeather:a,city:n,srcIcon:Ge(r),dayOfWeak:s,dateOfWeak:p,imgOpacity:"",dateOpacity:"",splitterOpacity:"",typegroupOpacity:"",textSymbol:"&#176;"};le(f)}function Fe(e,n,t){return e+" "+n+" "+t.getFullYear()}function Ge(e){return`https://openweathermap.org/img/wn/${e}.png`}function Ue(e){return fetch(e).then(t=>{if(t.ok)return t.json();le({temp:"no-",typeWeather:"",city:"",srcIcon:"",dayOfWeak:"",dateOfWeak:"",imgOpacity:" opacityElement",dateOpacity:" opacityElement",splitterOpacity:" opacityElement",typegroupOpacity:" opacityElement",textSymbol:"data"})})}function le(e){const n=ze(e);Qe().then(t=>[...t]).then(t=>{const a=l.viewportWidth;t.forEach((r,i)=>{if(a<=767){if(i===0){r.insertAdjacentHTML("beforebegin",n);return}}else if(a<=1279){if(i===0){r.insertAdjacentHTML("afterend",n);return}}else a>=1280&&i===1&&r.insertAdjacentHTML("afterend",n)})}).catch(t=>console.error(t))}function Ke(e){const n=e.indexOf(","),t=e.substr(0,n).trim(),a=e.substr(n+1).trim(),r=a.indexOf(" "),i=a.substr(0,r).trim(),s=a.substr(r+1).trim(),c=s.indexOf(" "),o=s.substr(0,c).trim();return{dayOfWeek:t,monthOfWeek:o,dateOfWeek:i}}function Je(){const e=`https://api.openweathermap.org/data/2.5/weather?q=lONDON&lang=en&units=metric&appid=${se}`;oe(e)}function ze(e){const{temp:n,typeWeather:t,city:a,srcIcon:r,dayOfWeak:i,dateOfWeak:s,imgOpacity:c,dateOpacity:o,splitterOpacity:p,typegroupOpacity:f,textSymbol:d}=e;return'<li class="weather"><div class="weather__group"><div class="weather__temperaturedate"><span class="weather__temperature">'+String(n)+'</span><span class="weather__symbol" >'+d+'</span></div ><div class="weather__splitter'+p+'"></div > <div class="weather__typegroup'+f+'"><span class="weather__type">'+String(t)+`</span > <div class="weather__citygroup"><svg class="weather__svg"><use href="${y}#location"></use></svg > <p class="weather__city">`+String(a)+'</p > </div ></div ></div ><div class="weather__img'+c+'"><img class="weather__imgvalue" src="'+String(r)+'" alt=""></div ><div class="weather__date'+o+'"><span class="weather__dayofweek">'+String(i)+'</span > <span class="weather__dateofweek">'+String(s)+'</span></div><div class="weather__refgroup"><a class="weather__ref" href="https://sinoptik.ua/" rel="noopener noreferrer" target="_blank">weather for week</a ></div ></li > '}function Qe(){return new Promise(e=>{const n=document.querySelectorAll(".article");if(n.length===0){ce();return}e(n)})}const Ve=new w;function Ze(){try{return fetch(`${Ve.MOST_POPULAR_URL}`).then(e=>{if(!e.ok)throw new Error("Such a request has not been found");return e.json()}).then(({results:e})=>e)}catch(e){console.log(e.message)}}const Xe=new w;let v=[];l.btnOpenModal.forEach(e=>{e.addEventListener("click",et)});function et(){l.btnOpenModal.forEach(e=>{e.classList.toggle("isActiveBtn")}),l.listConteinerEl.classList.toggle("is-open"),l.listConteinerEl.classList.toggle("list-container--animation")}const tt=async()=>{try{const e=await fetch(`${Xe.SEARCH_CATEGORI}`);if(e.ok===!1)throw new Error("Such a request has not been found");return await(await e.json()).results}catch(e){console.log(e.message)}};tt().then(e=>{if(e.forEach(n=>{v.push(n)}),l.viewportWidth<768)l.listConteinerEl.innerHTML=D(e);else if(l.viewportWidth>=768){const n=[];l.categoryBtns.forEach((t,a)=>{t.textContent=e[a].display_name,a=4});for(let t=6;t<v.length;t++)n.push(v[t]);l.listConteinerEl.innerHTML=D(n)}else if(l.viewportWidth>=1280){const n=[];l.categoryBtns.forEach((t,a)=>{t.textContent=e[a].display_name,a=5});for(let t=5;t<v.length;t++)n.push(v[t]);l.listConteinerEl.innerHTML=D(n)}});function D(e){return`<div class="rest__wrapper"><ul class="rest__list list">${e.map(t=>`<li class="rest__item item js-search">${t.display_name}</li>`).join("")}</ul></div >`}l.listConteinerEl.addEventListener("click",nt);function nt(){l.btnOpenModal.forEach(e=>{e.classList.remove("isActiveBtn")}),l.listConteinerEl.classList.remove("is-open")}const at=new w,U=document.querySelector(".articles_container"),rt=document.querySelector(".js-category__wrap");let j="";rt.addEventListener("click",it);function it(e){if(e.preventDefault(),!e.target.className.includes("js-search"))return;g.Loading.standard("Loading...",{backgroundColor:"rgba(0,0,0,0.8)"}),j=e.target.textContent;const n=encodeURIComponent(j.toLowerCase());st(n),g.Loading.remove(1e3)}async function st(e){try{const a=(await(await fetch(`${at.CATEGORY_END_POINT}${e}.json?api-key=Mw0nOoO0CyWfJRrshsqkL1haZT52Fizf`)).json()).results;ot(a)}catch(n){console.log(n)}}function ot(e){try{const n=e.map(t=>{let a=t.section,r=t.title,i=t.abstract,s=t.url,c=t.created_date.slice(0,10),o=t.multimedia,p="",f="";return a||(a=`${j}`),r||(r=i.slice(0,80)),i||(i=r),o===null?(p=t.thumbnail_standard||"https://cdn.pixabay.com/photo/2013/07/12/19/16/newspaper-154444_960_720.png",f=r):o[2]?(p=o[2].url,f=o[2].caption):(p=o[0].url,f=o[0].caption),{section:a,title:r,description:i,url:s,date:c,imgCaption:f,img:p}});ct(n)}catch(n){console.log(n)}}function ct(e){const n=e.map(t=>{if(!t)return;const{section:a,title:r,description:i,url:s,date:c,img:o,imgCaption:p}=t;return`<li class="article" >
      <div class="article_img_wrapper">
        <p class="already-read is-hidden">Already read</p>
        <p class="article_category">${a}</p>
        <img class="article_img" src="${o}" alt="${p}" width="395" height="395">
        <div class="article_flag">
        <button class="favorites-button article_flag--add"><span class="article_flag_text">Add to favorite</span>
          <svg width="16" height="16">
          <use href="${y}#heart_contur" width="16" height="16"></use>
         </svg>
          </button>
          <button class="favorites-button article_flag--remove is-hidden"><span class="article_flag_text">Remove from favorite</span>
          <svg width="16" height="16">
          <use href="${y}#heart_fill" width="16" height="16"></use>
        </svg>
           </button>
          </div>
      </div>
      <div class="article_text_wrapper">
        <h2 class="article_title">${r}</h2>
        <p class="article_text">${i}</p>
      </div>
      <div class="article_info_wrapper">
        <p class="article_date">${c}</p>
        <a href="${s}" class="read-more" target="_blank">Read more</a>
      </div>
      </li>`}).join("");return lt(n)}function lt(e){U.innerHTML="",U.insertAdjacentHTML("beforeend",e)}document.addEventListener("DOMContentLoaded",dt);function dt(e){e.preventDefault(),Ze().then(n=>fe(n)).then(n=>{l.articlesGallery.insertAdjacentHTML("beforeend",n),ce();const t=new Event("rendered");l.articlesGallery.dispatchEvent(t)}).then(()=>{const n=[...l.articlesGallery.querySelectorAll(".article_text")];ut(n)}),de(),ue()}function ut(e){e.forEach(n=>{if(n.textContent.length>70){const t=n.textContent.slice(0,70);n.textContent=`${t}...`}})}pe();l.deletePagination.classList.add("is-hidden");var K,J,z,Q;window.location.pathname==="/"?(J=(K=document.querySelector(".navbar__link"))==null?void 0:K.classList)==null||J.add("navbar__link--current"):(Q=(z=document.querySelector(`.navbar__link[href=".${window.location.pathname}"]`))==null?void 0:z.classList)==null||Q.add("navbar__link--current");
