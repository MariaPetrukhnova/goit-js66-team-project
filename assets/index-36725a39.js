(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerpolicy&&(c.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?c.credentials="include":o.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function t(o){if(o.ep)return;o.ep=!0;const c=r(o);fetch(o.href,c)}})();const $="api-key=Mw0nOoO0CyWfJRrshsqkL1haZT52Fizf",E="https://api.nytimes.com",O=`${E}/svc/news/v3/content/all/`,T=document.querySelector(".category");T.addEventListener("click",L);function L(e){if(e.preventDefault(),e.target.className!=="category__btn")return;const n=e.target.textContent,r=encodeURIComponent(n.toLowerCase());N(r)}async function N(e){try{const t=(await(await fetch(`${O}${e}.json?${$}`)).json()).results;console.log(t)}catch(n){console.log(n.message)}}function k(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}var P="previous",j="current",I="next",y=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"0";return e<10?n+e:e},f=function(e){return"".concat(e.getFullYear(),"-").concat(y(e.getMonth()+1),"-").concat(y(e.getDate()))},_=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},w=function(e){return new Promise(function(n){var r=[],t=C(e).map(function(a){return{date:a.date,iso:a.iso,type:P}}),o=q(e).map(function(a){return{date:a.date,iso:a.iso,type:j}});r=r.concat(t).concat(o);var c=F(e,r.length).map(function(a){return{date:a.date,iso:a.iso,type:I}});n(r.concat(c))})},p=function(e){return function(n){return Array(e).fill().map(n)}},q=function(e){var n=_(e);return p(n)(function(r,t){var o=t+1;return e.setDate(o),{date:o,iso:f(e)}})},C=function(e){var n,r,t=e.getMonth(),o=e.getFullYear(),c=Math.min(t-1,11),a=new Date(o,c),s=_(a),i=s-(n=e,r=new Date(n.getFullYear(),n.getMonth(),1).toDateString().substring(0,3),["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].indexOf(r))+1;return p(s-i+1)(function(m,l){var h=i+l;return a.setDate(h),{date:h,iso:f(a)}})},F=function(e,n){var r=42-n,t=e.getMonth()+1===12?0:e.getMonth()+1,o=t===0?e.getFullYear()+1:e.getFullYear(),c=new Date(o,t);return p(r)(function(a,s){var i=s+1;return c.setDate(i),{date:i,iso:f(c)}})},H=function(){function e(){(function(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")})(this,e)}var n,r;return n=e,(r=[{key:"getDates",value:function(t){return new Promise(function(o){return o(w(t).then(function(c){return c.map(function(a){return a})}))})}},{key:"getMatrix",value:function(t){return new Promise(function(o){o(w(t).then(function(c){return c.reduce(function(a,s,i){return(i%7==0?a.push([s]):a[a.length-1].push(s))&&a},[])}))})}}])&&k(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(),x=H;const v=new x;document.querySelector(".calendar__input");const Y=document.querySelector(".calendar__body"),B=document.querySelector("#calend-btn"),u=["January","February","March","April","May","June","July","August","September","October","November","December"];B.addEventListener("click",J);const R=async()=>{const e=await v.getMatrix(new Date);console.log("ðŸš€ ~ file: calendar.js:17 ~ main ~ datesArr",e);const n=new Date,r=[u[n.getMonth()],n.getFullYear()],t=g(e);K(e),console.log("ðŸš€ ~ file: calendar.js:28 ~ main ~ croppedArr",t),M(t),A(r)};async function J(){const n=document.querySelector(".calend-month").textContent.split(" ");let r=u.indexOf(n[0]);console.log("date:",n),r===11?(r=0,n[1]=+n[1]+1,console.log("date:",n)):r+=1;const t=await v.getMatrix(new Date(`${n[1]}, ${u[r]}`)),o=g(t);console.log("ðŸš€ ~ file: calendar.js:28 ~ main ~ croppedArr",o),M(o),A([u[r],n[1]])}function A([e,n]){const r=document.querySelector(".calendar__body"),t=r.querySelector("p");t&&t.remove(),r.insertAdjacentHTML("afterbegin",`<p class="calend-month">${e} ${n}</p>`)}function M(e){const n=document.querySelector(".calendar__list"),r=new Date().getDate();n.innerHTML=`${e.map(t=>r===t.date?`<li class="calendar__date active">${t.date}</li>`:`<li class="calendar__date">${t.date}</li>`).join("")}`}function g(e){const n=e.flat();return console.log("cropped",n),[...n].slice(1,36)}function K(e){const n=g(e);console.log(n)}Y.addEventListener("click",U);function U(e){console.log(e.target.className),e.target.className==="calendar__date"&&e.target.classList.toggle("checked")}R();class D{constructor(){this.API_KEY="api-key=9GYTd3hNgT1cJMME7q1HMJAu02NGsmfm",this.API_HOST="https://api.nytimes.com",this.WEB_HOST="https://www.nytimes.com",this.BASE_ENDPOINT_URL=`${this.API_HOST}/svc/topstories/v2/arts.json?${this.API_KEY}`,this.SEARCH_ENDPOINT_URL=`${this.API_HOST}/svc/search/v2/articlesearch.json?`}}const W=document.querySelector(".page-header");function b(e){console.log(e);const r=e.map(t=>{const{section:o,title:c,description:a,url:s,date:i,img:m,imgCaption:l}=t;return`
            <div class="news-card">
                <img width="396" src="${m}" alt="${l}">
                <span>${o}</span>
                <h2>${c}</h2>
                <p>${a}</p>
                <span>${i}</span>    
                <a href="${s}">Read more</a>
            </div>
        `}).join("");return console.log(r),r}function S(e){W.insertAdjacentHTML("afterend",e)}const d=new D,G=document.querySelector(".page-header__search-input");G.addEventListener("change",z);function z(e){const n=e.target.value;console.log(n),Z(n)}const Z=async e=>{try{const n=await fetch(`${d.SEARCH_ENDPOINT_URL}q=${e}&${d.API_KEY}`);if(n.ok===!1)throw new Error("Such a request has not been found");const t=(await n.json()).response.docs;console.log(t),Q(t)}catch(n){console.log(n.message)}};function Q(e){const n=e.map(t=>({section:t.section_name||t.section,title:t.title||t.headline.main,description:t.abstract,url:t.web_url||t.url,date:t.pub_date||t.created_date,img:`${d.WEB_HOST}/${t.multimedia[1].url}`}));console.log(n);const r=b(n);S(r)}const V=new D;document.addEventListener("DOMContentLoaded",ee);const X=async()=>{try{const e=await fetch(V.BASE_ENDPOINT_URL);if(e.ok===!1)throw new Error("Such a request has not been found");const r=(await e.json()).results;te(r)}catch(e){console.log(e.message)}};function ee(e){e.preventDefault(),X()}function te(e){console.log(e);const n=e.map(t=>({section:t.section_name||t.section,title:t.title||t.headline.main,description:t.abstract,url:t.web_url||t.url,date:t.pub_date||t.created_date,img:`${t.multimedia[0].url}`,imgCaption:`${t.multimedia[0].caption}`}));console.log(n);const r=b(n);S(r)}
