import{n as v,s as w,r as u,a as pe,b as fe,l as ge}from"./localeStoreageHandler-e58963db.js";import{c as he}from"./markup-90fbeeff.js";function me(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var _e="previous",ve="current",ye="next",F=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"0";return e<10?n+e:e},H=function(e){return"".concat(e.getFullYear(),"-").concat(F(e.getMonth()+1),"-").concat(F(e.getDate()))},X=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},G=function(e){return new Promise(function(n){var t=[],a=be(e).map(function(s){return{date:s.date,iso:s.iso,type:_e}}),r=we(e).map(function(s){return{date:s.date,iso:s.iso,type:ve}});t=t.concat(a).concat(r);var i=Le(e,t.length).map(function(s){return{date:s.date,iso:s.iso,type:ye}});n(t.concat(i))})},N=function(e){return function(n){return Array(e).fill().map(n)}},we=function(e){var n=X(e);return N(n)(function(t,a){var r=a+1;return e.setDate(r),{date:r,iso:H(e)}})},be=function(e){var n,t,a=e.getMonth(),r=e.getFullYear(),i=Math.min(a-1,11),s=new Date(r,i),d=X(s),o=d-(n=e,t=new Date(n.getFullYear(),n.getMonth(),1).toDateString().substring(0,3),["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].indexOf(t))+1;return N(d-o+1)(function(p,f){var h=o+f;return s.setDate(h),{date:h,iso:H(s)}})},Le=function(e,n){var t=42-n,a=e.getMonth()+1===12?0:e.getMonth()+1,r=a===0?e.getFullYear()+1:e.getFullYear(),i=new Date(r,a);return N(t)(function(s,d){var o=d+1;return i.setDate(o),{date:o,iso:H(i)}})},Se=function(){function e(){(function(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")})(this,e)}var n,t;return n=e,(t=[{key:"getDates",value:function(a){return new Promise(function(r){return r(G(a).then(function(i){return i.map(function(s){return s})}))})}},{key:"getMatrix",value:function(a){return new Promise(function(r){r(G(a).then(function(i){return i.reduce(function(s,d,o){return(o%7==0?s.push([d]):s[s.length-1].push(d))&&s},[])}))})}}])&&me(n.prototype,t),Object.defineProperty(n,"prototype",{writable:!1}),e}(),$e=Se;class b{constructor(){this.pageNumber=0,this.API_KEY="api-key=9GYTd3hNgT1cJMME7q1HMJAu02NGsmfm",this.API_HOST="https://api.nytimes.com",this.WEB_HOST="https://www.nytimes.com",this.BASE_ENDPOINT_URL=`${this.API_HOST}/svc/topstories/v2/arts.json?${this.API_KEY}`,this.SEARCH_ENDPOINT_URL=`${this.API_HOST}/svc/search/v2/articlesearch.json?`,this.SEARCH_CATEGORI=`${this.API_HOST}/svc/news/v3/content/section-list.json?${this.API_KEY}`,this.CATEGORY_END_POINT=`${this.API_HOST}/svc/news/v3/content/all/`,this.MOST_POPULAR_URL=`${this.API_HOST}/svc/mostpopular/v2/viewed/1.json?${this.API_KEY}`}}document.getElementById("pagination");const T=document.querySelector(".articles_container"),E=document.querySelector(".page-container"),ee=document.querySelector(".articles_container"),$=new b;let L=1e3;const x=document.querySelector(".not-found"),Ae=document.querySelector(".search-field");Ae.addEventListener("submit",Oe);function Oe(e){const t=e.currentTarget.elements.searchQuery.value.trim();if(!t)return;e.preventDefault();const a=document.querySelector(".calendar__input");a.value="";let r=$.pageNumber;a.value||(v.Loading.standard("Loading...",{backgroundColor:"rgba(0,0,0,0.8)"}),te(t,r),l.curPage=1,v.Loading.remove(1e3)),a.value&&(Y(t,a,r),l.curPage=1)}const te=async(e,n)=>{try{const t=await fetch(`${$.SEARCH_ENDPOINT_URL}q=${e}&page=${n}&${$.API_KEY}`);if(t.ok===!1)throw new Error("Such a request has not been found");const a=await t.json(),r=a.response.docs;L=a.response.meta.hits,L>1e3?l.totalPages=99:l.totalPages=Math.ceil(L/10),R({curPage:1,numLinksTwoSide:1,totalPages:4}),r.length?(x.classList.add("is-hidden"),E.classList.remove("is-hidden"),ne(r),L<9&&E.classList.add("is-hidden")):r.length===0&&(ae(),E.classList.add("is-hidden"))}catch(t){console.log(t)}};function ne(e){const n=e.map(t=>t.multimedia.length===0?{section:t.section_name||t.section,title:t.title||t.headline.main,description:t.abstract,url:t.web_url||t.url,date:t.pub_date.slice(0,10)||t.created_date.slice(0,10),imgCaption:t.lead_paragraph,img:"https://cdn.pixabay.com/photo/2013/07/12/19/16/newspaper-154444_960_720.png"}:{section:t.section_name||t.section,title:t.title||t.headline.main,description:t.abstract,url:t.web_url||t.url,date:t.pub_date.slice(0,10)||t.created_date.slice(0,10),imgCaption:t.lead_paragraph,img:`${$.WEB_HOST}/${t.multimedia[1].url}`});Pe(n)}function Pe(e){const n=e.map(t=>{if(!t)return;const{section:a,title:r,description:i,url:s,date:d,img:o,imgCaption:p}=t;return`<li class="article">
     <div class="article_img_wrapper">
       <p class="already-read is-hidden">Already read</p>
       <p class="article_category">${a}</p>
       <img class="article_img" src="${o}" alt="${p}" width="395" height="395">
       <div class="article_flag">
       <button class="favorites-button article_flag--add"><span class="article_flag_text">Add to favorite</span>
         <svg width="16" height="16">
         <use href="${w}#heart_contur" width="16" height="16"></use>
        </svg>
         </button>
         <button class="favorites-button article_flag--remove is-hidden"><span class="article_flag_text">Remove from favorite</span>
         <svg width="16" height="16">
         <use href="${w}#heart_fill" width="16" height="16"></use>
       </svg>
          </button>
         </div>
     </div>
     <div class="article_text_wrapper">
       <h2 class="article_title">${r}</h2>
       <p class="article_text">${i.slice(0,70)}...</p>
     </div>
     <div class="article_info_wrapper">
       <p class="article_date">${d.slice(0,10)}</p>
       <a href="${s}" class="read-more">Read more</a>
     </div>
     </li>`}).join("");return ke(n)}function ke(e){T.innerHTML="",ee.classList.add("articles_container"),T.insertAdjacentHTML("beforeend",e)}function ae(){x.classList.contains("is-hidden")&&(T.innerHTML="",ee.classList.remove("articles_container"),x.classList.remove("is-hidden"))}const C=document.getElementById("pagination"),q=document.querySelector("button.next-page"),W=document.querySelector("button.prev-page"),l={curPage:1,numLinksTwoSide:1,totalPages:10};window.innerWidth<768&&(l.numLinksTwoSide=0);C.addEventListener("click",e=>{const n=e.target;if(v.Loading.standard("Loading...",{backgroundColor:"rgba(0,0,0,0.8)"}),n.dataset.page){const t=parseInt(e.target.dataset.page,10);v.Loading.remove(1e3),l.curPage=t,re(),ie()}});function R(){const{totalPages:e,curPage:n,numLinksTwoSide:t}=l;let a=t+4;window.innerWidth<768&&(a=t+2);let r="",i="",s,d=`<li class="pg-item"data-page="${l.curPage}"><a class="pg-link" href="#">...</a></li>`;l.curPage<=2?s=`<li class="pg-item"data-page="${l.curPage-1}"><a class="pg-link" href="#">...</a></li>`:s=`<li class="pg-item"data-page="${l.curPage-2}"><a class="pg-link" href="#">...</a></li>`;let o=`<li class="pg-item"data-page="${l.curPage+2}"><a class="pg-link" href="#">...</a></li>`,p=0;const f=n-t,h=n+t;let m="";if(window.innerWidth<=768)for(let c=1;c<=e;c++)m=c===n?"active":"",e>=2*a-1?f>1&&h<e-1+1?c>=f&&c<=h&&(i+=_(c,m)):n<a&&c<=a||n>e-a&&c>=e-a+1||c===e||c===1?r+=_(c,m):(p++,p===1&&(r+=d)):r+=_(c,m);else for(let c=1;c<=e;c++)m=c===n?"active":"",e>=2*a-1?f>3&&h<e-3+1?c>=f&&c<=h&&(i+=_(c,m)):n<a&&c<=a||n>e-a&&c>=e-a+1||c===e||c===1?r+=_(c,m):(p++,p===1&&(r+=d)):r+=_(c,m);i?(i=_(1)+s+i+o+_(e),C.innerHTML=i):C.innerHTML=r}function _(e,n=""){return` <li class="pg-item ${n}" data-page="${e}">
        <a class="pg-link" href="#">${e}</a>
    </li>`}document.querySelector(".page-container").addEventListener("click",function(e){Ee(e.target)});function Ee(e){e.classList.contains("first-page")?l.curPage=1:e.classList.contains("last-page")?l.curPage=10:e.classList.contains("prev-page")?(l.curPage--,re(),q.disabled=!1):e.classList.contains("next-page")&&(l.curPage++,ie(),W.disabled=!1),R();const n=document.querySelector(".calendar__input").value,t=document.querySelector(".page-header__search-input").value;let a;n&&(a=n.split("/").reverse().join("")),!(!a&&!t)&&(t&&a||a?(Y(t,a,l.curPage-1),window.scroll({top:0,behavior:"smooth"})):(te(t,l.curPage-1),window.scroll({top:0,behavior:"smooth"})))}function re(){l.curPage===1?W.disabled=!0:W.disabled=!1}function ie(){l.curPage===l.totalPages?q.disabled=!0:q.disabled=!1}const A=new $e,U=new b;let S=1e3;const De=document.querySelector(".not-found"),D=document.querySelector(".page-container"),I=document.querySelector(".js-open-calendar"),B=document.querySelector(".calendar__input"),se=document.querySelector(".js-calendar-container"),Me=document.querySelector(".calendar__month-btn--next"),Te=document.querySelector(".calendar__month-btn--prev"),xe=document.querySelector(".calendar__year-btn"),g=["January","February","March","April","May","June","July","August","September","October","November","December"];xe.addEventListener("click",He);Me.addEventListener("click",qe);Te.addEventListener("click",We);I.addEventListener("click",oe);function oe(){const e=B.getAttribute("aria-expanded")==="true"||!1;I.setAttribute("aria-expanded",!e),I.classList.toggle("reversed"),se.classList.toggle("is-open")}const Ce=async()=>{const e=await A.getMatrix(new Date),n=new Date,t=[g[n.getMonth()],n.getFullYear()],a=k(e);P(a),O(t)};async function qe(){const n=document.querySelector(".calendar__month").textContent.split(" ");let t=je(n);const a=await A.getMatrix(new Date(`${n[1]}, ${g[t]}`)),r=k(a);P(r),O([g[t],n[1]])}async function We(){const n=document.querySelector(".calendar__month").textContent.split(" ");let t=Ie(n);const a=await A.getMatrix(new Date(`${n[1]}, ${g[t]}`)),r=k(a);P(r),O([g[t],n[1]])}function Ie(e){let n=g.indexOf(e[0]);return n===0?(n=11,e[1]=+e[1]-1):n-=1,n}function je(e){let n=g.indexOf(e[0]);return n===11?(n=0,e[1]=+e[1]+1):n+=1,n}async function He(){const n=document.querySelector(".calendar__month").textContent.split(" ");n[1]=+n[1]+1;let t=g.indexOf(n[0]);const a=await A.getMatrix(new Date(`${n[1]}, ${g[t]}`)),r=k(a);P(r),O([g[t],n[1]])}function O([e,n]){const t=document.querySelector(".calendar__body-caption"),a=t.querySelector("p");a&&a.remove(),t.insertAdjacentHTML("afterbegin",`<p class="calendar__month">${e} ${n}</p>`)}function P(e){const n=document.querySelector(".calendar__list"),t=new Date,a=t.getDate();n.innerHTML=`${e.map(r=>{const i=new Date(r.iso).getDay();return a===r.date?`<li id="${r.iso}" class="calendar__date calendar__date--active">${r.date}</li>`:+t<new Date(r.iso)?`<li id="${r.iso}" class="calendar__date calendar__date--inactive">${r.date}</li>`:i===6||i===0?`<li id="${r.iso}" class="calendar__date calendar__date--weekend">${r.date}</li>`:`<li id="${r.iso}" class="calendar__date">${r.date}</li>`}).join("")}`}function k(e){return[...e.flat()].slice(1,36)}se.addEventListener("click",Ne);function Ne(e){if(!e.target.classList.contains("calendar__date"))return;const t=e.target,a=document.querySelector(".calendar__date--active"),r=new Date(e.target.id);t.id.split("-").reverse().join("/");const i=t.id.split("-").join(""),s=document.querySelector(".page-header__search-input").value;if(a===t)B.value="",a.classList.remove("calendar__date--active");else{if(a!==t&&r>new Date)return;v.Loading.standard("Loading...",{backgroundColor:"rgba(0,0,0,0.8)"}),Re(),Ye(t),Y(s,i),l.curPage=1,v.Loading.remove(1e3)}}function Re(){const e=document.querySelector(".calendar__date.calendar__date--active");e&&e.classList.remove("calendar__date--active")}let K=0;function Be(e){const n=e.id.split("-").reverse().join("/");return B.value=n,K=e.id.split("-").join(""),K}const Y=async(e="",n="",t=0)=>{try{const a=await fetch(`${U.SEARCH_ENDPOINT_URL}q=${e}&page=${t}&begin_date=${n}&end_date=${n}&${U.API_KEY}`);if(a.ok===!1)throw new Error("Such a request has not been found");const r=await a.json(),i=r.response.docs;S=r.response.meta.hits,S>1e3?l.totalPages=99:l.totalPages=Math.ceil(S/10),R({curPage:1,numLinksTwoSide:1,totalPages:4}),i.length?(De.classList.add("is-hidden"),D.classList.remove("is-hidden"),ne(i),S<9&&D.classList.add("is-hidden")):i.length===0&&(ae(),D.classList.add("is-hidden"))}catch(a){console.log(a)}};function Ye(e){e.classList.add("calendar__date--active"),Be(e),oe()}Ce();document.querySelector("main");const ce="419bd34d8daba21c0a4890e35d027d3f";function le(e){Je(e).then(t=>{t!==void 0&&Ge(t)})}function de(){navigator.geolocation?navigator.geolocation.getCurrentPosition(Fe,Qe):alert("Your browser does not support geolocation")}function Fe(e){const{latitude:n,longitude:t}=e.coords,a=`https://api.openweathermap.org/data/2.5/weather?lat=${n}&lon=${t}&units=metric&appid=${ce}`;le(a)}function Ge(e){const{name:n}=e,{temp:t}=e.main,{main:a,icon:r}=e.weather[0],i=new Date,{dayOfWeek:s,dateOfWeek:d,monthOfWeek:o}=ze(i.toUTCString()),p=Ue(d,o,i),f={temp:Math.floor(t),typeWeather:a,city:n,srcIcon:Ke(r),dayOfWeak:s,dateOfWeak:p,imgOpacity:"",dateOpacity:"",splitterOpacity:"",typegroupOpacity:"",textSymbol:"&#176;"};ue(f)}function Ue(e,n,t){return e+" "+n+" "+t.getFullYear()}function Ke(e){return`https://openweathermap.org/img/wn/${e}.png`}function Je(e){return fetch(e).then(t=>{if(t.ok)return t.json();ue({temp:"no-",typeWeather:"",city:"",srcIcon:"",dayOfWeak:"",dateOfWeak:"",imgOpacity:" opacityElement",dateOpacity:" opacityElement",splitterOpacity:" opacityElement",typegroupOpacity:" opacityElement",textSymbol:"data"})})}function ue(e){const n=Ve(e);Ze().then(t=>[...t]).then(t=>{const a=u.viewportWidth;t.forEach((r,i)=>{if(a<=767){if(i===0){r.insertAdjacentHTML("beforebegin",n);return}}else if(a<=1279){if(i===0){r.insertAdjacentHTML("afterend",n);return}}else a>=1280&&i===1&&r.insertAdjacentHTML("afterend",n)})}).catch(t=>console.error(t))}function ze(e){const n=e.indexOf(","),t=e.substr(0,n).trim(),a=e.substr(n+1).trim(),r=a.indexOf(" "),i=a.substr(0,r).trim(),s=a.substr(r+1).trim(),d=s.indexOf(" "),o=s.substr(0,d).trim();return{dayOfWeek:t,monthOfWeek:o,dateOfWeek:i}}function Qe(){const e=`https://api.openweathermap.org/data/2.5/weather?q=lONDON&lang=en&units=metric&appid=${ce}`;le(e)}function Ve(e){const{temp:n,typeWeather:t,city:a,srcIcon:r,dayOfWeak:i,dateOfWeak:s,imgOpacity:d,dateOpacity:o,splitterOpacity:p,typegroupOpacity:f,textSymbol:h}=e;return'<li class="weather"><div class="weather__group"><div class="weather__temperaturedate"><span class="weather__temperature">'+String(n)+'</span><span class="weather__symbol" >'+h+'</span></div ><div class="weather__splitter'+p+'"></div > <div class="weather__typegroup'+f+'"><span class="weather__type">'+String(t)+`</span > <div class="weather__citygroup"><svg class="weather__svg"><use href="${w}#location"></use></svg > <p class="weather__city">`+String(a)+'</p > </div ></div ></div ><div class="weather__img'+d+'"><img class="weather__imgvalue" src="'+String(r)+'" alt=""></div ><div class="weather__date'+o+'"><span class="weather__dayofweek">'+String(i)+'</span > <span class="weather__dateofweek">'+String(s)+'</span></div><div class="weather__refgroup"><a class="weather__ref" href="https://sinoptik.ua/" rel="noopener noreferrer" target="_blank">weather for week</a ></div ></li > '}function Ze(){return new Promise(e=>{const n=document.querySelectorAll(".article");if(n.length===0){de();return}e(n)})}const Xe=new b;function et(){try{return fetch(`${Xe.MOST_POPULAR_URL}`).then(e=>{if(!e.ok)throw new Error("Such a request has not been found");return e.json()}).then(({results:e})=>e)}catch(e){console.log(e.message)}}const tt=new b;let y=[];u.btnOpenModal.forEach(e=>{e.addEventListener("click",nt)});function nt(){u.btnOpenModal.forEach(e=>{e.classList.toggle("isActiveBtn")}),u.listConteinerEl.classList.toggle("is-open"),u.listConteinerEl.classList.toggle("list-container--animation")}const at=async()=>{try{const e=await fetch(`${tt.SEARCH_CATEGORI}`);if(e.ok===!1)throw new Error("Such a request has not been found");return await(await e.json()).results}catch(e){console.log(e.message)}};at().then(e=>{if(e.forEach(n=>{y.push(n)}),u.viewportWidth<768)u.listConteinerEl.innerHTML=M(e);else if(u.viewportWidth>=768){const n=[];u.categoryBtns.forEach((t,a)=>{t.textContent=e[a].display_name,a=4});for(let t=6;t<y.length;t++)n.push(y[t]);u.listConteinerEl.innerHTML=M(n)}else if(u.viewportWidth>=1280){const n=[];u.categoryBtns.forEach((t,a)=>{t.textContent=e[a].display_name,a=5});for(let t=5;t<y.length;t++)n.push(y[t]);u.listConteinerEl.innerHTML=M(n)}});function M(e){return`<div class="rest__wrapper"><ul class="rest__list list">${e.map(t=>`<li class="rest__item item js-search">${t.display_name}</li>`).join("")}</ul></div >`}u.listConteinerEl.addEventListener("click",rt);function rt(){u.btnOpenModal.forEach(e=>{e.classList.remove("isActiveBtn")}),u.listConteinerEl.classList.remove("is-open")}const it=new b,J=document.querySelector(".articles_container"),st=document.querySelector(".js-category__wrap");let j="";st.addEventListener("click",ot);function ot(e){if(e.preventDefault(),!e.target.className.includes("js-search"))return;v.Loading.standard("Loading...",{backgroundColor:"rgba(0,0,0,0.8)"}),j=e.target.textContent;const n=encodeURIComponent(j.toLowerCase());ct(n),v.Loading.remove(1e3)}async function ct(e){try{const a=(await(await fetch(`${it.CATEGORY_END_POINT}${e}.json?api-key=Mw0nOoO0CyWfJRrshsqkL1haZT52Fizf`)).json()).results;lt(a)}catch(n){console.log(n)}}function lt(e){try{const n=e.map(t=>{let a=t.section,r=t.title,i=t.abstract,s=t.url,d=t.created_date.slice(0,10),o=t.multimedia,p="",f="";return a||(a=`${j}`),r||(r=i.slice(0,80)),i||(i=r),o===null?(p=t.thumbnail_standard||"https://cdn.pixabay.com/photo/2013/07/12/19/16/newspaper-154444_960_720.png",f=r):o[2]?(p=o[2].url,f=o[2].caption):(p=o[0].url,f=o[0].caption),{section:a,title:r,description:i,url:s,date:d,imgCaption:f,img:p}});dt(n)}catch(n){console.log(n)}}function dt(e){const n=e.map(t=>{if(!t)return;const{section:a,title:r,description:i,url:s,date:d,img:o,imgCaption:p}=t;return`<li class="article" >
      <div class="article_img_wrapper">
        <p class="already-read is-hidden">Already read</p>
        <p class="article_category">${a}</p>
        <img class="article_img" src="${o}" alt="${p}" width="395" height="395">
        <div class="article_flag">
        <button class="favorites-button article_flag--add"><span class="article_flag_text">Add to favorite</span>
          <svg width="16" height="16">
          <use href="${w}#heart_contur" width="16" height="16"></use>
         </svg>
          </button>
          <button class="favorites-button article_flag--remove is-hidden"><span class="article_flag_text">Remove from favorite</span>
          <svg width="16" height="16">
          <use href="${w}#heart_fill" width="16" height="16"></use>
        </svg>
           </button>
          </div>
      </div>
      <div class="article_text_wrapper">
        <h2 class="article_title">${r}</h2>
        <p class="article_text">${i}</p>
      </div>
      <div class="article_info_wrapper">
        <p class="article_date">${d}</p>
        <a href="${s}" class="read-more" target="_blank">Read more</a>
      </div>
      </li>`}).join("");return ut(n)}function ut(e){J.innerHTML="",J.insertAdjacentHTML("beforeend",e)}document.addEventListener("DOMContentLoaded",pt);function pt(e){e.preventDefault(),et().then(n=>he(n)).then(n=>{u.articlesGallery.insertAdjacentHTML("beforeend",n),de();const t=new Event("rendered");u.articlesGallery.dispatchEvent(t)}).then(()=>{const n=[...u.articlesGallery.querySelectorAll(".article_text")];ft(n)}),pe(),fe()}function ft(e){e.forEach(n=>{if(n.textContent.length>70){const t=n.textContent.slice(0,70);n.textContent=`${t}...`}})}ge();u.deletePagination.classList.add("is-hidden");var z,Q,V,Z;window.location.pathname==="/"?(Q=(z=document.querySelector(".navbar__link"))==null?void 0:z.classList)==null||Q.add("navbar__link--current"):(Z=(V=document.querySelector(`.navbar__link[href=".${window.location.pathname}"]`))==null?void 0:V.classList)==null||Z.add("navbar__link--current");
